diff --git a/lib/chunkio/src/CMakeLists.txt b/lib/chunkio/src/CMakeLists.txt
index 3590143fd..b43f08928 100644
--- a/lib/chunkio/src/CMakeLists.txt
+++ b/lib/chunkio/src/CMakeLists.txt
@@ -14,6 +14,7 @@ set(src
   )

 set(libs cio-crc32)
+set(libs ${libs} fts)

 if(${CMAKE_SYSTEM_NAME} MATCHES "Windows")
   set(src
diff --git a/src/flb_http_client.c b/src/flb_http_client.c
index 810e172fe..16d89baf0 100644
--- a/src/flb_http_client.c
+++ b/src/flb_http_client.c
@@ -46,6 +46,8 @@
 #include <fluent-bit/tls/flb_tls.h>
 #include <time.h>
 #include <fluent-bit/flb_signv4_ng.h>
+#include <fluent-bit/flb_config_map.h>
+#include <fluent-bit/flb_upstream_ha.h>

 void flb_http_client_debug(struct flb_http_client *c,
                            struct flb_callback *cb_ctx)
